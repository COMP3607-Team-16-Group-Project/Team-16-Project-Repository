//------------------
//JavaFileEvaluator:
//------------------




//-------------------
//Maven Package Name:
//-------------------
package com.example;
//-------------------




//------------------
//ImportStatements:
//------------------
import java.io.File;
import java.util.*;
//------------------



//--------------------------------------------------------------------------------------------------------------------------
//Class Body:
//--------------------------------------------------------------------------------------------------------------------------
public class JavaFileEvaluator {
    //----------------------------------------------------------------------------------------------------------------------
    //Attributes:
    //----------------------------------------------------------------------------------------------------------------------
    private final List<File> javaFiles;
    private final Map<File, Map<String, Integer>> detailedResults = new HashMap<>();
    private final List<Evaluation> strategies;
    //----------------------------------------------------------------------------------------------------------------------

    public JavaFileEvaluator(List<File> javaFiles) {
        this.javaFiles = javaFiles;
        this.strategies = List.of(
                new NamingConvention(),
                new MethodBehavior(),
                new ClassRelationship()
        );
    }
    //----------------------------------------------------------------------------------------------------------------------






    //----------------------------------------------------------------------------------------------------------------------
    //Methods:
    //----------------------------------------------------------------------------------------------------------------------
    //---------------------------------------------------------------------------------------------
    //Evaluate Method:
    //---------------------------------------------------------------------------------------------
    public void evaluate() {
        for (File javaFile : javaFiles) {
            Map<String, Integer> strategyScores = new LinkedHashMap<>();
            for (Evaluation strategy : strategies) {
                int score = strategy.evaluate(javaFile);
                strategyScores.put(strategy.getClass().getSimpleName(), score);
                System.out.printf("[%s] %s: %d points%n", javaFile.getName(), strategy.getClass().getSimpleName(), score);
            }
            detailedResults.put(javaFile, strategyScores);
        }
    }


    //---------------------------------------------------------------------------------------------
    //Getter Method For Detailed Results:
    //---------------------------------------------------------------------------------------------
    public Map<File, Map<String, Integer>> getDetailedResults() {
        return detailedResults;
    }
    //---------------------------------------------------------------------------------------------
    //----------------------------------------------------------------------------------------------------------------------
}
//--------------------------------------------------------------------------------------------------------------------------
